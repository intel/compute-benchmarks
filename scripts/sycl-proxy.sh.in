#!/bin/env bash

#
# Copyright (C) 2022-2025 Intel Corporation
#
# SPDX-License-Identifier: MIT
#

# substitute first argument with SYCL compiler name
# if compiler is acpp or the command line contains -fsycl,
# otherwise run as is

set -e

if [[ -n "@SYCL_BIN_PATH@" ]] && [[ -d "@SYCL_BIN_PATH@" ]]; then
    export PATH="@SYCL_BIN_PATH@:$PATH"
fi

if [[ "@SYCL_COMPILER@" == "acpp" || " $@ " =~ .*\ -fsycl\ .* ]]; then
    @SYCL_COMPILER@ "${@:2}"
else
    "$@"
fi
